<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mana Gem Converter</title>
    <style>
        :root {
            --primary-color: #49556e;
            --secondary-color: #E8EFFC;
            --background-color: #191E29;
            --text-color: #E8EFFC;
            --item-text-color: #5285D6;
            --highlight-color: #2e3447;
            --table-bg: #252a38;
            --table-header-bg: var(--primary-color);
            --table-border: #101318;
            --shadow-color: rgba(16, 19, 24, 0.2);
            --font-size-base: 16px;
            --font-size-heading: 1.3rem;
            --font-family: 'Arial', sans-serif;
            --spacing-unit: 10px;
            --image-border-radius: 4px;
            --transition-speed: 0.3s;
            --blue-gem: #2196F3;
            --red-gem: #C62828;
            --yellow-gem: #FDD835;
            --frost-gem: #00BCD4;
            --green-gem: #66BB6A;
            --table-row-height: 40px;
            --input-label-width: 50%;
            --input-field-width: 50%;
            --results-amount-width: 30%;
            --results-gem-width: 70%;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: var(--spacing-unit);
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            font-size: var(--font-size-base);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background-color: var(--table-bg);
            padding: calc(var(--spacing-unit) * 2);
            border-radius: var(--image-border-radius);
            box-shadow: 0 2px 5px var(--shadow-color);
            border: 0.1px solid var(--primary-color);
            max-width: 500px;
            width: 100%;
            text-align: center;
        }

        h1 {
            color: var(--text-color);
            font-size: calc(var(--font-size-heading) * 1.5);
            margin-bottom: calc(var(--spacing-unit) * 2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-image {
            width: 64px;
            height: 64px;
            border-radius: var(--image-border-radius);
            margin-right: 8px;
        }

        .header-placeholder-after {
            width: 32px;
            height: 32px;
            border-radius: var(--image-border-radius);
            display: inline-block;
            margin-left: 8px;
        }

        .input-section {
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .input-section table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: calc(var(--spacing-unit) * 1);
            background-color: var(--table-bg);
            border: 1px solid var(--primary-color);
            table-layout: fixed;
        }

        .input-section .label {
            text-align: center;
            font-weight: bold;
            font-size: calc(var(--font-size-base) * 0.9);
            height: calc(var(--table-row-height) / 2);
            vertical-align: middle;
            width: var(--input-label-width);
            border: 1px solid var(--primary-color);
        }

        .input-section .input-cell {
            text-align: center;
            height: calc(var(--table-row-height) / 2);
            vertical-align: middle;
            width: var(--input-field-width);
            border: 1px solid var(--primary-color);
        }

        .input-section input {
            padding: calc(var(--spacing-unit) * 0.4);
            width: 80px;
            background-color: var(--table-header-bg);
            border: 1px solid #000000; /* Black 1px border */
            border-radius: var(--image-border-radius);
            font-size: calc(var(--font-size-base) * 0.9);
            color: var(--text-color);
            font-family: var(--font-family);
            box-sizing: border-box;
            -webkit-appearance: none;
            -moz-appearance: textfield;
            appearance: none;
        }

        .input-section input::placeholder {
            color: var(--text-color);
            opacity: 0.7;
        }

        .input-section input:focus {
            outline: none;
            border-color: var(--item-text-color);
        }

        .button-section {
            padding: calc(var(--spacing-unit) * 0.5);
            display: inline-block;
        }

        button {
            padding: calc(var(--spacing-unit) * 0.6) calc(var(--spacing-unit) * 2);
            background-color: var(--table-header-bg);
            color: var(--text-color);
            border: 1px solid #000000; /* Black 1px border */
            border-radius: var(--image-border-radius);
            cursor: pointer;
            font-size: calc(var(--font-size-base) * 0.9);
            font-weight: bold;
            transition: background-color var(--transition-speed) ease;
        }

        button:hover {
            background-color: var(--highlight-color);
        }

        .results {
            margin-top: calc(var(--spacing-unit) * 2);
            text-align: left;
        }

        .results p {
            margin: calc(var(--spacing-unit) * 0.8) 0;
            font-size: calc(var(--font-size-base) * 0.9);
        }

        .results table {
            width: 100%;
            border-collapse: collapse;
            margin-top: calc(var(--spacing-unit) * 1);
            background-color: var(--table-bg);
            border: 1px solid var(--primary-color);
        }

        .results td {
            padding: calc(var(--spacing-unit) * 0.6);
            border: 1px solid var(--primary-color);
            text-align: left;
            font-size: calc(var(--font-size-base) * 0.9);
            height: var(--table-row-height);
            vertical-align: middle;
        }

        .results td:first-child {
            text-align: center;
            width: var(--results-amount-width);
            font-weight: bold;
        }

        .results td:last-child {
            width: var(--results-gem-width);
        }

        .blue {
            color: var(--blue-gem);
        }

        .red {
            color: var(--red-gem);
        }

        .yellow {
            color: var(--yellow-gem);
        }

        .frost {
            color: var(--frost-gem);
        }

        .green {
            color: var(--green-gem);
        }

        .error {
            color: #d9534f;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                width: auto;
            }

            .input-section input {
                width: 70px;
            }

            .results {
                text-align: center;
            }

            .results td {
                font-size: calc(var(--font-size-base) * 0.8);
            }

            .input-section .label,
            .input-section .input-cell {
                font-size: calc(var(--font-size-base) * 0.8);
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: calc(var(--font-size-heading) * 1.2);
            }

            .input-section input {
                width: 60px;
                font-size: calc(var(--font-size-base) * 0.8);
            }

            button {
                font-size: calc(var(--font-size-base) * 0.8);
            }

            .results p {
                font-size: calc(var(--font-size-base) * 0.8);
            }

            .input-section .label {
                font-size: calc(var(--font-size-base) * 0.7);
            }

            .header-image {
                width: 32px;
                height: 32px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            <img src="https://i.imgur.com/jng1Xiw.png" alt="Mana Gem Icon" class="header-image">
            <b>Mana Gem Converter</b>
            <span class="header-placeholder-after"></span>
        </h1>
        <div class="input-section">
            <table>
                <tr>
                    <td class="label">Starting Magic Level (0-59)</td>
                    <td class="label">Target Magic Level (1-60)</td>
                </tr>
                <tr>
                    <td class="input-cell"><input type="text" id="start-level" pattern="[0-9]*"></td>
                    <td class="input-cell"><input type="text" id="target-level" pattern="[0-9]*"></td>
                </tr>
            </table>
            <div class="button-section">
                <button onclick="calculateGems()">Convert</button>
            </div>
        </div>
        <div id="results" class="results">
            <p><strong>To advance from magic level <span id="start-display">0</span> to magic level <span id="target-display">60</span> you need:</strong></p>
            <table id="gem-table">
                <tr><td id="blue-amount">0</td><td><span class="blue"><strong>Blue Mana Gems</strong></span></td></tr>
                <tr><td id="green-amount">0</td><td><span class="green"><strong>Green Mana Gems</strong></span></td></tr>
                <tr><td id="frost-amount">0</td><td><span class="frost"><strong>Frost Mana Gems</strong></span></td></tr>
                <tr><td id="yellow-amount">0</td><td><span class="yellow"><strong>Sunsworn Mana Gems</strong></span></td></tr>
                <tr><td id="red-amount">0</td><td><span class="red"><strong>Demonic Mana Gems</strong></span></td></tr>
            </table>
        </div>
    </div>

    <script>
        // Cumulative Blue Mana Gems from level 0 to target level (Column E values, levels 0 to 60)
        const cumulativeBlue = {
            0: 0,
            1: 10,
            2: 21,
            3: 34,
            4: 47,
            5: 62,
            6: 78,
            7: 95,
            8: 115,
            9: 136,
            10: 160,
            11: 186,
            12: 214,
            13: 246,
            14: 280,
            15: 318,
            16: 360,
            17: 406,
            18: 456,
            19: 512,
            20: 573,
            21: 640,
            22: 714,
            23: 796,
            24: 885,
            25: 984,
            26: 1092,
            27: 1211,
            28: 1342,
            29: 1487,
            30: 1645,
            31: 1820,
            32: 2012,
            33: 2223,
            34: 2455,
            35: 2711,
            36: 2992,
            37: 3301,
            38: 3641,
            39: 4015,
            40: 4426,
            41: 4879,
            42: 5377,
            43: 5924,
            44: 6527,
            45: 7189,
            46: 7918,
            47: 8720,
            48: 9602,
            49: 10572,
            50: 11639,
            51: 12767,
            52: 14058,
            53: 15479,
            54: 17041,
            55: 18692,
            56: 20561,
            57: 22641,
            58: 24928,
            59: 27445,
            60: 30103
        };

        // Conversion rates: Blue value per 1 gem of each type
        const rates = {
            'Red': 5.0,
            'Yellow': 3.5,
            'Frost': 2.5,
            'Green': 1.75
        };

        // Gem colors for display
        const gemColors = {
            'Blue': 'blue',
            'Red': 'red',
            'Yellow': 'yellow',
            'Frost': 'frost',
            'Green': 'green'
        };

        // Display names for gems
        const displayNames = {
            'Blue': 'Blue',
            'Green': 'Green',
            'Frost': 'Frost',
            'Yellow': 'Sunsworn',
            'Red': 'Demonic'
        };

        // Display order
        const displayOrder = ['Blue', 'Green', 'Frost', 'Yellow', 'Red'];

        function calculateGems() {
            const startInput = document.getElementById('start-level').value;
            const targetInput = document.getElementById('target-level').value;
            const resultsDiv = document.getElementById('results');

            // Validate input
            const start = parseInt(startInput);
            const target = parseInt(targetInput);
            if (isNaN(start) || isNaN(target) || start < 0 || start > 59 || target < 1 || target > 60 || start >= target) {
                document.getElementById('start-display').textContent = '?';
                document.getElementById('target-display').textContent = '?';
                document.getElementById('blue-amount').textContent = '-';
                document.getElementById('green-amount').textContent = '-';
                document.getElementById('frost-amount').textContent = '-';
                document.getElementById('yellow-amount').textContent = '-';
                document.getElementById('red-amount').textContent = '-';
                return;
            }

            // Update display text
            document.getElementById('start-display').textContent = start;
            document.getElementById('target-display').textContent = target;

            // Calculate Blue Mana Gems needed (cumulative to target minus cumulative to start)
            const blueNeeded = cumulativeBlue[target] - cumulativeBlue[start];

            // Calculate other gems
            const gems = { 'Blue': blueNeeded };
            for (const [gem, rate] of Object.entries(rates)) {
                gems[gem] = Math.ceil(blueNeeded / rate);
            }

            // Update table amounts
            for (const gem of displayOrder) {
                const amount = gems[gem];
                document.getElementById(gem.toLowerCase() + '-amount').textContent = amount;
            }
        }

        // Enforce numeric input
        document.getElementById('start-level').addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, ''); // Allow only digits
        });

        document.getElementById('target-level').addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, ''); // Allow only digits
        });
    </script>
</body>
</html>